---
import { Image } from "astro:assets";

const testimonials = [
  "Â¡EmpecÃ© con NÃ©stor y estoy mÃ¡s fuerte que nunca! ğŸ’ª Siempre motivÃ¡ndome y ajustando el plan a mis necesidades. Â¡Totalmente recomendable! ğŸ¤©",
  "No creÃ­a que un plan de entrenamiento pudiera cambiar tanto mi cuerpo y mente. ğŸ˜¤ğŸ”¥ Â¡Los resultados son increÃ­bles! ğŸ’¥ğŸ’¯",
  "PensÃ© que no podÃ­a ser constante, pero NÃ©stor lo hizo posible. ğŸ’ª Â¡Mis amigos ya no me reconocen! ğŸ˜‚ğŸ”¥",
  "NÃ©stor es el entrenador perfecto. ğŸ’¯ EmpecÃ© sin saber nada y ahora me siento como un pro. ğŸ¤“ Â¡Los resultados siguen llegando! ğŸ’¥",
  "Me cambiÃ³ la vida. ğŸ˜† Los ejercicios mÃ¡s duros se sienten fÃ¡ciles con Ã©l. Â¡Nunca me sentÃ­ tan bien! 10/10 â­ï¸ğŸ’ª",
  "Le debo mucho a NÃ©stor ğŸ™ Me guiÃ³ de forma clara y siempre estÃ¡ pendiente. Estoy mÃ¡s motivado que nunca. ğŸ”¥",
  "Estaba estancado, pero NÃ©stor me dio el empujÃ³n que necesitaba. ğŸ’¥ Â¡Mis progresos son brutales! ğŸ’ª",
  "Mi vida cambiÃ³ con el plan de NÃ©stor. ğŸ˜ Â¡Nunca pierdo la motivaciÃ³n! Mi progreso es brutal. ğŸ’ªğŸš€",
];

const response = await fetch("https://randomuser.me/api/?results=8");
const data = await response.json();

const users = data.results.map((user: any, index: number) => ({
  name: `${user.name.first} ${user.name.last}`,
  username: user.login.username,
  image: user.picture.large,
  testimonial: testimonials[index],
}));
---

<section
  class="overflow-hidden mb-36 container mx-auto px-4"
  style="
background: radial-gradient(
  closest-side,
  rgba(22, 1, 1, 1) 0%,
  rgba(6, 0, 0, 1) 100%
);"
>
  <h1
    class="text-white text-lg-title text-center text-balance font-alfa-slab-one leading-relaxed uppercase pt-8"
  >
    Â¿QuÃ© opinan mis estudiantes del plan?
  </h1>

  <div class="flex items-center">
    <div class="swiper-button-prev mx-4"></div>

    <article class="swiper mt-8 max-md:max-w-[95%]">
      <div class="swiper-wrapper flex items-stretch py-4">
        {
          users.map((user: any) => (
            <article
              class="swiper-slide bg-primary-color/5 rounded-xl p-4 border-primary-color border-2"
              style="box-shadow: 0px 0px 15px 0px rgba(215, 0, 0, 0.5);"
            >
              <div class="flex items-center">
                <Image
                  src={user.image}
                  width={16}
                  height={16}
                  alt="User"
                  class="size-14 md:size-16 rounded-full object-cover"
                />
                <div class="flex flex-col ml-4 gap-1">
                  <span class="text-white text-balance text-lg">
                    {user.name}
                  </span>
                  <span class="text-white/60">@{user.username}</span>
                </div>
              </div>

              <p class="text-white text-pretty text-sm leading-relaxed mt-4">
                {user.testimonial}
              </p>
            </article>
          ))
        }
      </div>

      <div class="swiper-pagination"></div>
    </article>

    <div class="swiper-button-next mx-4"></div>
  </div>
</section>
